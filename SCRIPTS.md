# 启动脚本说明

## 🚀 启动脚本总览

项目提供了多个启动脚本，适用于不同的使用场景：

### 📋 脚本清单

| 脚本文件       | 用途           | 适用场景                     |
| -------------- | -------------- | ---------------------------- |
| `start_api.sh` | **主启动脚本** | 首次启动、生产环境、完整检查 |
| `start.sh`     | **快速启动**   | 日常开发、已配置环境         |
| `setup_env.sh` | **环境配置**   | 初始化配置文件               |

## 🎯 推荐使用方式

### 1. 首次启动或生产环境

```bash
./start_api.sh
```

**特点：**

- ✅ 完整的环境检查
- ✅ API 密钥状态检查
- ✅ 功能模块状态显示
- ✅ 详细的使用指南
- ✅ 自动配置向导

### 2. 日常开发

```bash
./start.sh
```

**特点：**

- ⚡ 快速启动
- ⚡ 简洁输出
- ⚡ 适合频繁重启

### 3. 直接启动（高级用户）

```bash
uvicorn app.main:app --reload --port 8000
```

## 🔧 服务说明

### 🏗️ 架构类型

**单体应用** - 所有功能在一个服务中运行

### 📊 包含的数据源

- **Yahoo Finance** (主要数据源，免费)
- **Polygon.io** (降级数据源，需 API 密钥)
- **SEC API** (财报数据，需 API 密钥)

### 🛠️ 提供的功能

- 📈 实时股票报价
- 📊 历史 K 线数据
- 🏢 公司基本信息
- 💼 SEC 官方财报
- 🔄 智能数据源降级
- 🧪 测试和调试接口

## ⚙️ 配置要求

### 必需配置

- `.env` 文件存在
- Python 虚拟环境 (`venv/`)
- 依赖包已安装

### 可选配置

- `POLYGON_API_KEY` - 启用完整降级功能
- `SEC_API_KEY` - 启用 SEC 财报功能

## 🌐 访问地址

启动成功后，访问以下地址：

- **API 文档**: http://localhost:8000/docs
- **健康检查**: http://localhost:8000/health
- **根目录**: http://localhost:8000/

## 🔍 故障排除

### 常见问题

1. **虚拟环境不存在**

   ```bash
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   ```

2. **配置文件不存在**

   ```bash
   cp config.env .env
   # 编辑 .env 文件
   ```

3. **端口被占用**

   ```bash
   # 查看占用端口的进程
   lsof -i :8000
   # 杀死进程
   kill -9 <PID>
   ```

4. **权限问题**
   ```bash
   chmod +x *.sh
   ```

## 💡 最佳实践

1. **开发环境**：使用 `./start.sh` 快速启动
2. **生产部署**：使用 `./start_api.sh` 完整检查
3. **CI/CD**：使用 `uvicorn` 直接启动
4. **调试**：查看脚本输出的详细信息

## 🆘 获取帮助

如果遇到问题：

1. 查看脚本输出的错误信息
2. 检查 `.env` 配置文件
3. 查看项目 README.md
4. 提交 GitHub Issue
