# Finance API 配置文件模板
# 复制为 .env 文件并根据需要修改配置

# ===========================================
# 应用基础配置
# ===========================================
DEBUG=true
LOG_LEVEL=INFO
HOST=0.0.0.0
PORT=8000

# ===========================================
# 主数据源配置 - Yahoo Finance
# ===========================================
# Yahoo Finance 相关配置
YF_SESSION_TIMEOUT=30
YF_MAX_RETRIES=3

# ===========================================
# 降级数据源配置 - Polygon.io
# ===========================================
# Polygon.io API 密钥（可选，用于数据源降级）
# 获取地址: https://polygon.io/dashboard/api-keys
# 注意: 免费账户有限额，生产环境建议使用付费账户
POLYGON_API_KEY=your_polygon_api_key_here

# Polygon.io 请求配置
POLYGON_TIMEOUT=30
POLYGON_MAX_RETRIES=3

# ===========================================
# 多数据源降级机制配置
# ===========================================
# 是否启用降级机制
FALLBACK_ENABLED=true

# 触发降级的最大连续失败次数（推荐5次）
PRIMARY_SOURCE_MAX_FAILURES=5

# 降级操作超时时间（秒）
FALLBACK_TIMEOUT=10

# 降级冷却期（秒）- 恢复主数据源前的等待时间
FALLBACK_COOLDOWN_PERIOD=300

# ===========================================
# 缓存配置
# ===========================================
# Redis 缓存 URL（可选，不配置则使用内存缓存）
# REDIS_URL=redis://localhost:6379/0

# 缓存时间（秒）
CACHE_TTL_SECONDS=300

# ===========================================
# API 限流配置
# ===========================================
# 每分钟最大请求数
RATE_LIMIT_REQUESTS=100

# 限流时间窗口（秒）
RATE_LIMIT_WINDOW=60

# ===========================================
# 日志配置
# ===========================================
# 日志级别：DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# ===========================================
# 监控配置
# ===========================================
# 健康检查间隔（秒）
HEALTH_CHECK_INTERVAL=60

# ===========================================
# 安全配置
# ===========================================
# CORS 配置（生产环境建议设置具体域名）
# ALLOWED_ORIGINS=your_frontend_domain.com

# ===========================================
# 高级配置
# ===========================================
# 密钥（生产环境请修改）
SECRET_KEY=your-secret-key-change-in-production

# ===========================================
# 测试配置
# ===========================================
# 测试环境标识
TESTING=false

# 测试用的股票代码
TEST_SYMBOL=AAPL

# ===========================================
# 生产环境额外配置
# ===========================================
# 在生产环境中，建议设置：
# DEBUG=false
# LOG_LEVEL=WARNING
# CORS_ORIGINS=your_frontend_domain.com

# ===========================================
# SEC API 配置
# ===========================================
# SEC API 密钥（用于获取财务报表数据）
# 获取地址: https://sec-api.io/dashboard
SEC_API_KEY=your_sec_api_key_here

# SEC API 请求配置
SEC_API_TIMEOUT=30
SEC_API_MAX_RETRIES=3

# ===========================================
# 数据源配置说明
# ===========================================
#
# 1. Yahoo Finance (主数据源)
#    - 免费、无限制访问
#    - 无需API密钥
#    - 涵盖全球股票市场
#
# 2. Polygon.io (降级数据源)
#    - 专业级数据质量
#    - 需要API密钥（免费账户亦可用）
#    - 当Yahoo Finance失败时自动启用
#
# 降级策略：
# Yahoo Finance 失败 → 自动切换到 Polygon.io
# 前端完全无感知，保持相同的API格式